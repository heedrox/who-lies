# Plan Técnico: Colapsar/Expandir Información del Rol del Jugador

## Descripción
Implementar funcionalidad para colapsar/expandir la información del rol del jugador, mostrando inicialmente solo el número de jugador y permitiendo expandir para ver el rol completo, complice (si aplica) y objetivo. El objetivo es proteger la privacidad del rol cuando alguien vea accidentalmente el móvil del jugador.

## Archivos a Modificar

### `/Users/jordimarti/Development/who-lies/web/index.html`

**Sección HTML (líneas 1276-1281):**
- Modificar la estructura del `player-profile` para incluir:
  - Un contenedor clickeable para el número de jugador
  - Un ícono de flecha para indicar estado colapsado/expandido
  - Un contenedor colapsable para la información del rol

**Sección CSS (líneas 745-789):**
- Agregar estilos para:
  - `.player-profile-header` - contenedor clickeable del header
  - `.collapse-arrow` - ícono de flecha con animación de rotación
  - `.role-details` - contenedor colapsable para información del rol
  - `.collapsed` y `.expanded` - estados de colapso
  - Transiciones suaves para la animación

**Sección JavaScript (líneas 1748-1828):**
- Modificar la función `updatePlayerProfile()` para:
  - Crear la nueva estructura HTML con elementos colapsables
  - Agregar event listeners para el toggle de colapso
  - Manejar el estado inicial colapsado
  - Actualizar la lógica de mostrar/ocultar información del rol

## Algoritmo de Implementación

### 1. Estructura HTML
```
<div id="player-profile" class="player-profile">
  <div class="player-profile-header" onclick="toggleRoleDetails()">
    <span id="profile-title">JUG. X</span>
    <span class="collapse-arrow">▼</span>
  </div>
  <div id="role-details" class="role-details collapsed">
    <div id="player-role" class="profile-title">ROL</div>
    <div id="role-info" class="role-info"></div>
    <div id="target-info" class="role-info"></div>
  </div>
</div>
```

### 2. Estados de Colapso
- **Colapsado (inicial)**: Solo muestra número de jugador y flecha hacia abajo
- **Expandido**: Muestra rol, complice (si aplica) y objetivo, con flecha hacia arriba

### 3. Funcionalidad de Toggle
- Click/tap en el header alterna entre estados
- Animación suave de la flecha (rotación 180°)
- Transición suave del contenido (height/opacity)
- Estado persistente durante la sesión

### 4. Lógica de Actualización
- La función `updatePlayerProfile()` debe:
  - Crear la estructura HTML si no existe
  - Mantener la lógica existente de asignación de roles
  - Asegurar que el estado inicial sea colapsado
  - Preservar la funcionalidad de mostrar información específica por rol

## Consideraciones Técnicas

- **Responsive**: Funcionar correctamente en móviles y tablets
- **Accesibilidad**: Mantener la funcionalidad de click/tap
- **Performance**: No afectar el rendimiento de actualizaciones en tiempo real
- **Compatibilidad**: Mantener compatibilidad con la funcionalidad existente de Firebase
- **UX**: Transiciones suaves y feedback visual claro

## Elementos de UI/UX

- **Ícono de flecha**: ▼ (colapsado) / ▲ (expandido)
- **Animación**: Rotación de 180° en 0.3s
- **Transición de contenido**: Slide down/up con opacity
- **Estado visual**: Diferencia clara entre estados colapsado/expandido
- **Área de click**: Todo el header del perfil para facilitar la interacción
